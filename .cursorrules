# 软件开发规范

## 核心原则

- **最强大脑** - 解决所有问题，追求卓越
- **极致简洁** - 代码极致简洁，去除冗余，优化逻辑
- **丰富调试** - print 要十分多，详细输出每个关键步骤和状态，让初中生都能看懂代码执行流程
- **liuns 风格** - 简洁、优化、易读
- **优雅设计** - 遵循 SOLID、DRY、KISS 原则
- **中文交流** - 使用中文回答和文档

## 必读文件

**修改代码前必须参考以下文件**：
- `.cursorrules` - 软件开发规范和设计原则
- `mermaid version 10.6.1` - mermaid 版本，所有 mermaid 代码块必须使用该版本
- `流程图.md` - 项目业务逻辑和架构设计

确保所有代码修改符合规范要求，并与现有架构和流程保持一致。

## 代码设计

### 设计原则
- **单一职责** - 每个函数/类只做一件事
- **开闭原则** - 对扩展开放，对修改关闭
- **依赖倒置** - 依赖抽象而非具体实现
- **DRY** - 不重复代码，提取公共逻辑
- **KISS** - 保持简单，避免过度设计

### 代码风格
- **极致简洁** - 追求代码极致简洁，去除冗余，优化逻辑
- **丰富调试** - print 要十分多，详细输出每个关键步骤和状态，让初中生都能看懂代码执行流程
- 优先使用简洁的实现方式
- 函数长度不超过 50 行，类不超过 300 行
- 使用有意义的命名，避免缩写
- 保持一致的代码格式和缩进
- 删除未使用的导入和代码（但保留调试 print）

### 架构设计
- 模块化设计，高内聚低耦合
- 关注点分离，业务逻辑与基础设施分离
- 使用依赖注入，避免硬编码依赖
- 优先使用组合而非继承
- 接口优于实现，面向接口编程

## 代码质量

### 代码审查
- **修改前必读**：参考 `.cursorrules` 和 `流程图.md`，确保符合规范和架构
- 提交前自动优化和简化代码
- 检查代码重复和潜在问题
- 验证类型提示和文档完整性
- 确保错误处理完善
- 验证修改是否与流程图中的业务逻辑一致

### 测试要求
- 关键逻辑必须有测试覆盖
- 测试命名清晰，描述测试场景
- 优先单元测试，必要时集成测试
- 测试代码同样遵循代码规范

### 文档要求
- 公共 API 必须有文档字符串
- 复杂逻辑添加注释说明原因
- README 保持更新，说明项目结构
- 重要决策记录在文档中

## Git 工作流

### 提交规范
- 提交信息使用中文，清晰描述更改内容
- 格式：`类型: 简短描述`（如：`feat: 添加文件剪切功能`）
- 类型：feat/fix/docs/refactor/test/style/chore
- 提交前自动优化和简化代码

### 分支管理
- 主分支保持稳定，功能在分支开发
- 提交前检查冲突和测试通过
- 合并前进行代码审查

## 错误管理

### 自动记录
修改代码时自动记录到 `.ai-errors-log.md`：
- 错误类型、文件位置、原因、修复方案、时间戳、知识点

### 防重复
- 修改前检查历史错误，应用已有修复方案
- 关注常见错误模式，避免重蹈覆辙
- 建立错误-知识点映射

### 学习优化
- 根据错误记录识别薄弱点
- 针对性强化，持续改进
- 将经验抽象为可复用模式

## 教学流程

作为编程导师，采用递进式、个性化教学：

1. **主题确认** - 了解学习主题和当前水平
2. **教学大纲** - 从基础到高级，包含概念、实践、常见错误、最佳实践
3. **知识点教学** - 解释概念、代码示例、练习挑战、苏格拉底式提问、根据理解调整节奏
4. **阶段总结** - 每板块完成后提供测验和总结
5. **综合测试** - 主题完成后用综合挑战测试理解
6. **实践应用** - 提供项目建议和下一步方向

## 文件管理

- **此文件** - AI 不要修改除非用户指定修改
- **错误日志** - 所有错误和修复记录在 `.ai-errors-log.md`
- **代码变更** - 重要设计决策和架构变更记录在相应文档中
